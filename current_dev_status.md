# 当前开发状态

本文档记录了 VideoMapping 项目的当前开发状态，包括已知问题、待测试功能和未来计划。

## 已知问题

### 视频流相关

- ✅ 已修复：JavaScript 中的 `null` 引用错误（`convertBtn` 元素不存在）
- ✅ 已修复：视频流不显示问题（WebSocket 连接和视频帧处理）
- ✅ 已修复：图像坐标计算中的 NaN 问题（添加了对 `videoWidth` 和 `videoHeight` 的检查）
- ✅ 已修复：标定模式按钮不起作用的问题（添加了缺失的 `toggleCalibrationMode` 函数）

### 标记（ArUco）相关

- ❌ 未解决：ArUco 标记检测功能尚未完全测试
- ❌ 未解决：使用 ArUco 标记进行自动标定的功能可能存在问题
- ❌ 未解决：标记坐标保存和加载功能尚未验证

## 未测试功能

1. **坐标系统功能**
   - 原点设置
   - 坐标类型切换（直角坐标系和极坐标系）
   - 坐标转换精度验证

2. **标定功能**
   - 手动标定的精度验证
   - 标定结果保存和加载功能
   - 使用不同数量的标定点对精度的影响

3. **ArUco 标记功能**
   - 标记检测的稳定性和准确性
   - 使用标记进行自动标定
   - 标记坐标的保存和加载

4. **性能相关**
   - 高分辨率视频流的性能
   - 长时间运行的稳定性
   - 资源占用情况（CPU、内存）

## 下一步计划

1. **完善 ArUco 标记功能**
   - 测试并修复 ArUco 标记检测问题
   - 完善使用标记进行自动标定的功能
   - 验证标记坐标保存和加载功能

2. **增强标定功能**
   - 添加标定质量评估
   - 优化标定算法，提高精度
   - 添加标定点可视化功能

3. **用户界面改进**
   - 添加更多的用户反馈和提示
   - 改进错误处理和异常情况的显示
   - 优化移动设备上的使用体验

4. **性能优化**
   - 减少视频流延迟
   - 优化内存使用
   - 添加视频流质量调整选项

## 测试计划

1. **功能测试**
   - 测试所有基本功能的正常工作
   - 验证各种边界条件和异常情况的处理

2. **性能测试**
   - 测试不同分辨率下的性能
   - 长时间运行测试
   - 资源占用监控

3. **用户体验测试**
   - 收集用户反馈
   - 评估界面的直观性和易用性
   - 识别并改进用户体验问题

## 参与开发

如果你想参与解决上述问题或测试未验证的功能，请参考以下步骤：

1. 克隆仓库并设置开发环境
2. 选择一个问题或功能进行工作
3. 创建一个新的分支
4. 实现并测试你的更改
5. 提交 Pull Request

我们欢迎任何形式的贡献，包括问题报告、功能请求、代码贡献和文档改进。
